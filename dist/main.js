(()=>{"use strict";class t{constructor(){this.setupwebgl()}setupwebgl(){const t=document.getElementById("gl");t.width=t.clientWidth,t.height=t.clientHeight,this.gl=t.getContext("webgl2"),this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height);let e=this.gl.createShader(this.gl.VERTEX_SHADER),r=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.gl.shaderSource(e,"#version 300 es\n\nin vec2 pos;\n\nuniform mat4 trans;\n\nvoid main() {\n  gl_Position = trans*vec4(pos.x-1.,pos.y, 0.0, 1.0);\n}"),this.gl.compileShader(e),this.gl.getShaderParameter(e,this.gl.COMPILE_STATUS)||console.error(this.gl.getShaderInfoLog(e)),this.gl.shaderSource(r,"#version 300 es\nprecision highp float;\n\nout vec4 color;\n\nuniform float alpha;\n\nvoid main() {\n  color = vec4(1.,1.,0.,alpha);\n}"),this.gl.compileShader(r),this.gl.getShaderParameter(r,this.gl.COMPILE_STATUS)||console.error(this.gl.getShaderInfoLog(r)),this.program=this.gl.createProgram(),this.gl.attachShader(this.program,e),this.gl.attachShader(this.program,r),this.gl.linkProgram(this.program),this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS)||console.error(this.gl.getProgramInfoLog(this.program)),this.gl.clearColor(0,0,0,0),this.gl.enable(this.gl.BLEND),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.DST_ALPHA),this.gl.disable(this.gl.DEPTH_TEST)}draw(t,e){this.gl.clearColor(1,0,0,1),this.gl.enable(this.gl.BLEND),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.DST_ALPHA),this.gl.useProgram(this.program);let r=this.gl.getUniformLocation(this.program,"trans");this.gl.uniformMatrix4fv(r,!0,[.02,0,0,-1,0,.02,0,0,0,0,1,0,0,0,0,1]);let i=this.gl.getAttribLocation(this.program,"pos"),l=this.gl.getUniformLocation(this.program,"alpha");this.gl.uniform1f(l,e);let a=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,a),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(t[0]),this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(i,2,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(i);for(let e=1;e<t.length;++e)this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(t[e]),this.gl.STATIC_DRAW),this.gl.drawArrays(this.gl.LINE_STRIP,0,.5*t[1].length)}}var e;window.onload=()=>{e=new t,document.getElementById("button1").addEventListener("click",(()=>{!function(){let t=parseFloat(document.getElementById("input1").value),r=parseFloat(document.getElementById("input2").value),i=parseFloat(document.getElementById("input3").value);e.draw(function(t,e){let r=new Array(2*t),i=new Array(2),l=new Array(10),a=new Array(10);for(let t=0;t<10;++t)l[t]=2*Math.random(),a[t]=2*Math.random()*Math.PI;for(let h=0;h<t;++h){r[h]=new Array(e),r[h][0]=.2*(Math.random()-.5),r[h][1]=0;let t=(Math.random()-.5)*Math.PI*.25;i=[Math.cos(t),Math.sin(t)];for(let t=1;t<e;++t){for(let e=0;e<10;++e)i[0]+=.0025*(-l[e]*Math.sin(l[e]*r[h][2*(t-1)]*a[e])+Math.cos(l[e]*r[h][2*(t-1)+1]+a[e])),i[1]+=.0025*(-l[e]*Math.sin(l[e]*r[h][2*(t-1)+1]*a[e])+Math.cos(l[e]*r[h][2*(t-1)]+a[e]));r[h][2*t]=r[h][2*(t-1)]+i[0],r[h][2*t+1]=r[h][2*(t-1)+1]+i[1]}}return r}(t,r),i)}()}))}})();